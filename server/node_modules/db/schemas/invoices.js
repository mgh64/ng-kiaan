//
//
//

var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var ObjectId = Schema.Types.ObjectId;

var invoices_schema = Schema({
  //
  id: Number,
  type: {
    type: String,
    enum: ['buy', 'sale', 'service', 'pbuy', 'psale', 'pservice']
  },
  person_id: {
    type: ObjectId,
    ref: "persons"
  },
  by_id: {
    type: ObjectId,
    ref: "bys"
  },
  items: [{
    product_id: {
      type: ObjectId,
      ref: 'products'
    },
    cost_id: {
      type: ObjectId,
      ref: 'costs'
    },
    income_id: {
      type: ObjectId,
      ref: 'incomes'
    },
    value: Number,
    price: Number,
    comment: String
  }],
  creator_id: {
    type: ObjectId,
    ref: 'users'
  },
  comment: String
});


module.exports = mongoose.model('invoices', invoices_schema);
